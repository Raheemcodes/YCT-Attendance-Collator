<app-map
  (coordinateGenerated)="onCoordinateGenerated($event)"
  [student]="true"
  *ngIf="!located && !error"
></app-map>

<app-student *ngIf="authenticate"></app-student>

<div *ngIf="isLoading && !error" class="load-box">
  <div class="lds-ellipsis loader">
    <div></div>
    <div></div>
    <div></div>
    <div></div>
  </div>
</div>

<div *ngIf="error && !isLoading && located" class="expired">
  <svg
    x="0"
    y="0"
    viewBox="0 0 512 512"
    style="enable-background: new 0 0 512 512"
    xml:space="preserve"
  >
    <g>
      <g xmlns="http://www.w3.org/2000/svg">
        <path
          d="m211 165c0-40.58-32.401-73.712-72.688-74.941-.766-.039-1.536-.059-2.312-.059s-1.546.02-2.312.059c-40.287 1.229-72.688 34.361-72.688 74.941 0 41.355 33.645 75 75 75s75-33.645 75-75zm-60-30c0 8.271-6.729 15-15 15s-15-6.729-15-15 6.729-15 15-15 15 6.729 15 15zm-15 75c-24.813 0-45-20.187-45-45 0-5.258.915-10.305 2.58-15 6.192 17.459 22.865 30 42.42 30s36.228-12.541 42.42-30c1.665 4.695 2.58 9.742 2.58 15 0 24.813-20.187 45-45 45z"
          fill="#005500"
          data-original="#000000"
          class=""
        ></path>
        <path
          d="m451 165c0-40.58-32.401-73.712-72.688-74.941-.766-.039-1.536-.059-2.312-.059s-1.546.02-2.313.059c-40.286 1.229-72.687 34.361-72.687 74.941 0 41.355 33.645 75 75 75s75-33.645 75-75zm-60-30c0 8.271-6.729 15-15 15s-15-6.729-15-15 6.729-15 15-15 15 6.729 15 15zm-15 75c-24.813 0-45-20.187-45-45 0-5.258.915-10.305 2.58-15 6.192 17.459 22.865 30 42.42 30s36.228-12.541 42.42-30c1.665 4.695 2.58 9.742 2.58 15 0 24.813-20.187 45-45 45z"
          fill="#005500"
          data-original="#000000"
          class=""
        ></path>
        <path
          d="m301 315v15h30v-15c0-41.355-33.645-75-75-75s-75 33.645-75 75v15h30v-15c0-24.813 20.187-45 45-45s45 20.187 45 45z"
          fill="#005500"
          data-original="#000000"
          class=""
        ></path>
        <path
          d="m76 362c-24.813 0-45 20.187-45 45v60c0 24.813 20.187 45 45 45s45-20.187 45-45v-60c0-24.813-20.187-45-45-45zm15 105c0 8.271-6.729 15-15 15s-15-6.729-15-15v-60c0-8.271 6.729-15 15-15s15 6.729 15 15z"
          fill="#005500"
          data-original="#000000"
          class=""
        ></path>
        <path
          d="m196 362c-24.813 0-45 20.187-45 45v60c0 24.813 20.187 45 45 45s45-20.187 45-45v-60c0-24.813-20.187-45-45-45zm15 105c0 8.271-6.729 15-15 15s-15-6.729-15-15v-60c0-8.271 6.729-15 15-15s15 6.729 15 15z"
          fill="#005500"
          data-original="#000000"
          class=""
        ></path>
        <path
          d="m316 362h-45v150h30v-60h15c24.813 0 45-20.187 45-45s-20.187-45-45-45zm0 60h-15v-30h15c8.271 0 15 6.729 15 15s-6.729 15-15 15z"
          fill="#005500"
          data-original="#000000"
          class=""
        ></path>
        <path
          d="m436 422c-8.271 0-15-6.729-15-15s6.729-15 15-15c4.006 0 7.773 1.56 10.607 4.394l10.607 10.606 21.213-21.214-10.607-10.606c-8.5-8.499-19.8-13.18-31.82-13.18-24.813 0-45 20.187-45 45s20.187 45 45 45c8.271 0 15 6.729 15 15s-6.729 15-15 15c-4.006 0-7.773-1.56-10.607-4.394l-10.607-10.606-21.213 21.214 10.607 10.606c8.5 8.499 19.8 13.18 31.82 13.18 24.813 0 45-20.187 45-45s-20.187-45-45-45z"
          fill="#005500"
          data-original="#000000"
          class=""
        ></path>
        <path
          d="m211 15v-15h-30v15c0 24.813-20.187 45-45 45h-75v30h75c41.355 0 75-33.645 75-75z"
          fill="#005500"
          data-original="#000000"
          class=""
        ></path>
        <path
          d="m451 60h-75c-24.813 0-45-20.187-45-45v-15h-30v15c0 41.355 33.645 75 75 75h75z"
          fill="#005500"
          data-original="#000000"
          class=""
        ></path>
      </g>
    </g>
  </svg>
  <p>{{ error }}</p>
</div>

<h1 *ngIf="attendance.length > 0 && !isLoading && located && !error">
  Attendance <span>[{{ date }}]</span>
</h1>

<div
  *ngIf="attendance.length > 0 && !isLoading && located && !error"
  class="link-cover search-box"
>
  <input
    class="form-input"
    type="search"
    #search
    (input)="onSearch(search)"
    placeholder="Enter Matric Number"
  />
</div>

<h2 *ngIf="attendance.length > 0 && !isLoading && located && !error">
  <span class="number-title">S/N</span>
  <span class="matric-title">Matric Number</span>
  <span class="status-title">Status</span>
</h2>

<ul
  *ngIf="attendance.length > 0 && !isLoading && located && !error"
  class="records"
  #list
>
  <li *ngFor="let attendanceLine of attendance; let i = index" class="record">
    <div class="number">{{ i + 1 }}.</div>
    <div class="matric-number">{{ attendanceLine.matricNumber }}</div>
    <div class="status">
      <div
        [style]="
          attendanceLine.status == 'Present' ? '' : 'background-color: #d3ce47'
        "
        #drop
        class="current"
        (click)="dropdown(drop, list)"
      >
        {{ attendanceLine.status }}
        <div class="dropdown-arrow"></div>
      </div>
      <div class="status-opt">
        <div class="present" (click)="changeStatus(true, i)">Present</div>
        <div class="absent" (click)="changeStatus(false, i)">Absent</div>
      </div>
    </div>
  </li>
</ul>

<span
  *ngIf="attendance.length > 0 && !isLoading && located && !error"
  class="timeout"
  >Time Left - {{ hours }} hour : {{ minutes }} mins</span
>
